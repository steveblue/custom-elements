<!DOCTYPE html>
<html class="no-js" lang="">

<head>
    <base href="/">

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Web Components</title>

    <style>
    body{background:#000;color:#cdcdcd;font-family:Dank Mono,sans-serif;font-size:16px;min-height:100%}[tabindex],button,input{transition-property:box-shadow,border;transition-duration:300ms;transition-timing-function:ease-in-out}button,input{color:#fff;font-size:.8em;padding:10px;box-sizing:border-box;text-decoration:none;border-radius:4px;box-shadow:0 0 0 transparent;border:1px solid transparent;outline:0}ul{padding:0;margin:0;list-style:none;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-start:0;-webkit-margin-before:0;-webkit-margin-after:0}[tabindex]{outline:1px solid transparent}:focus,button:focus,input:focus{box-shadow:0 0 0 #ff69b4;outline:1px solid #ff69b4}[is=my-button]{background:#181818;cursor:pointer;color:#fff;font-weight:400}[is=my-input]{background:#181818;border:0;color:#fff}
    </style>

    <script type="text/javascript">
    !function(e){"use strict";!function(e,t,r){if(!t.get("ungap-li")&&typeof Reflect!=typeof n){var n="extends";try{var l={};l[n]="li";var a=HTMLLIElement,i=function(){return Reflect.construct(a,[],i)};if(i.prototype=r.create(a.prototype),t.define("ungap-li",i,l),!/is="ungap-li"/.test((new i).outerHTML))throw{}}catch(l){var o="attributeChangedCallback",u="connectedCallback",f="disconnectedCallback",c=r.assign,s=r.create,v=r.defineProperties,d=r.setPrototypeOf,b=t.define,p=t.get,w=t.upgrade,g=t.whenDefined,C=s(null);new MutationObserver(function(e){for(var t=0,r=e.length;t<r;t++){for(var n=e[t],l=n.addedNodes,a=n.removedNodes,i=0,o=l.length;i<o;i++)m(l[i]);for(i=0,o=a.length;i<o;i++)y(a[i])}}).observe(e,{childList:!0,subtree:!0}),v(t,{define:{value:function(r,l,a){if(r=r.toLowerCase(),a&&n in a){C[r]=c({},a,{Class:l});for(var i=a[n]+'[is="'+r+'"]',o=e.querySelectorAll(i),u=0,f=o.length;u<f;u++)m(o[u])}else b.apply(t,arguments)}},get:{value:function(e){return e in C?C[e].Class:p.call(t,e)}},upgrade:{value:function(e){var r=L(e);!r||e instanceof r.Class?w.call(t,e):O(e,r)}},whenDefined:{value:function(e){return e in C?Promise.resolve():g.call(t,e)}}});var h=e.createElement;function A(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],l=n.attributeName,a=n.oldValue,i=n.target,u=i.getAttribute(l);o in i&&(a!=u||null!=u)&&i[o](l,a,i.getAttribute(l),null)}}function y(e){if(1===e.nodeType){M(e,y);var t=L(e);t&&e instanceof t.Class&&f in e&&e[f]()}}function L(e){var t=e.getAttribute("is");return t&&(t=t.toLowerCase())in C?C[t]:null}function O(e,t){var r=t.Class,n=r.observedAttributes||[];if(d(e,r.prototype),n.length){new MutationObserver(A).observe(e,{attributes:!0,attributeFilter:n,attributeOldValue:!0});for(var l=[],a=0,i=n.length;a<i;a++)l.push({attributeName:n[a],oldValue:null,target:e});A(l)}}function m(e){if(1===e.nodeType){M(e,m);var t=L(e);t&&(e instanceof t.Class||O(e,t),u in e&&e[u]())}}function M(e,t){for(var r=e.querySelectorAll("[is]"),n=0,l=r.length;n<l;n++)t(r[n])}v(e,{createElement:{value:function(r,n){var l=h.call(e,r);return n&&"is"in n&&(l.setAttribute("is",n.is),t.upgrade(l)),l}}})}}}(document,customElements,Object)}(this.window=this.window||{});
    //# sourceMappingURL=polyfill.js.map
    </script>

</head>

<body>

    <h3>Custom Elements</h3>
    <my-list>
        <ul slot="menu">
            <li><my-item><span slot="msg">Item 1</span></my-item></li>
            <li><my-item><span slot="msg">Item 2</span></my-item></li>
            <li><my-item><span slot="msg">Item 3</span></my-item></li>
            <li><my-item><span slot="msg">Item 4</span></my-item></li>
        </ul>
    </my-list>
    <br />
    <br />
    <button is="my-button"></button>
    <input is="my-input" type="text">

    <script type="text/javascript">
    var app=function(t){"use strict";function e(t,e,n,o){var s,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(i<3?s(r):i>3?s(e,n,r):s(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r}const n=(...t)=>t,o=(...t)=>t,s=()=>{};class i{constructor(t){this.target=t,this.channels={default:new BroadcastChannel("default")},this.events={}}get(t){return this.events[t]}set(t,e){return this.events[t]=e,this.get(t)}emit(t){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t)}broadcast(t,e){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t),null===(t={type:t.type,detail:t.detail}).detail&&delete t.detail,e?this.channels[e].postMessage(t):this.channels.default.postMessage(t)}setChannel(t){this.channels[t]=new BroadcastChannel(t)}removeChannel(t){this.channels[t].close(),delete this.channels[t]}}function r(t){if(t)return e=>(function(t,e){e.prototype.elementMeta=Object.assign({},t),e.prototype.elementMeta.eventMap={},e.prototype.template=document.createElement("template"),e.prototype.template=`<style>${t.style}</style>${t.template}`,e.prototype.getEvent=function(t){return this.elementMeta.events[t]},e.prototype.setEvent=function(t,e){return this.elementMeta.events[t]=e}}(t,e),e);console.error("Component must include ElementMeta to compile")}function c(t,e){return function(n,o,r){const{onInit:c=s,onDestroy:l=s}=n,a=Symbol(o);n.onInit=function(){c.call(this),function(){const n=this[a]=((...t)=>{r.value.apply(this,t)});this.emitter||(this.emitter=new i(this),e&&(this.elementMeta.eventMap[t]={key:t,handler:o},this.emitter.channels[e].onmessage=(e=>{this[this.elementMeta.eventMap[t].handler](e.data)}))),this.addEventListener(t,n)}.call(this)},n.onDestroy=function(){l.call(this),function(){this.removeEventListener(t,this[a])}.call(this)}}}function l(t,e){const n=`${t.elementMeta.selector}`;if(!document.getElementById(`${n}-x`)){const e=document.createElement("style");e.setAttribute("id",`${n}-x`),e.innerText=t.elementMeta.style,e.innerText=e.innerText.replace(/:host/gi,`[is=${n}]`),document.head.appendChild(e)}}function a(t,e){return e||(e=[]),Array.from(function(t){return t.parentNode}(t).children).filter(t=>"TEXT"!==t.tagName&&"STYLE"!==t.tagName)}function u(t){return a(t).indexOf(t)}class m extends HTMLElement{constructor(){super(),function(t,e){const n=t.attachShadow(e||{}),o=document.createElement("template");o.innerHTML=t.template,n.appendChild(o.content.cloneNode(!0))}(this,{mode:"open"}),this.onInit&&this.onInit()}}class h extends HTMLButtonElement{constructor(){super(),function(t,e){const n=document.createElement("template");n.innerHTML=t.elementMeta.template,t.appendChild(n.content.cloneNode(!0))}(this),l(this),this.onInit&&this.onInit()}}class p extends HTMLInputElement{constructor(){super(),l(this),this.onInit&&this.onInit()}}var d,y;return t.MyButtonComponent=class extends h{constructor(){super()}onClick(t){this.emitter.broadcast("bang")}onKeyUp(t){"Enter"===t.key&&this.emitter.broadcast("bang")}},e([(d="bang",y={bubbles:!0,composed:!0},function(t,e,n){const{onInit:o=s}=t;t.onInit=function(){o.call(this),function(){this.emitter||(this.emitter=new i(this)),this.emitter.set(d,new CustomEvent(d,y||{}))}.call(this)}}),c("click")],t.MyButtonComponent.prototype,"onClick",null),e([c("keyup")],t.MyButtonComponent.prototype,"onKeyUp",null),t.MyButtonComponent=e([r({selector:"my-button",template:n`<span>button</span>`,style:o`:host{background:#181818;cursor:pointer;color:#fff;font-weight:400}`})],t.MyButtonComponent),customElements.define("my-button",t.MyButtonComponent,{extends:"button"}),t.MyInputComponent=class extends p{constructor(){super()}onFocus(t){this.value="input"}},e([c("focus")],t.MyInputComponent.prototype,"onFocus",null),t.MyInputComponent=e([r({selector:"my-input",style:o`:host{background:#181818;border:0;color:#fff}`})],t.MyInputComponent),customElements.define("my-input",t.MyInputComponent,{extends:"input"}),t.MyListComponent=class extends m{constructor(){super(),this.currentIndex=0}deactivateElement(t){t.setAttribute("tabindex","-1"),t.querySelector("my-item").setAttribute("state","")}activateElement(t){t.setAttribute("tabindex","0"),t.querySelector("my-item").setAttribute("state","--selected")}connectedCallback(){this.setAttribute("tabindex","0")}onFocus(t){for(const t of this.children[0].children)t===this.children[0].children[this.currentIndex]?this.activateElement(t):this.deactivateElement(t),t.addEventListener("click",e=>{a(t).forEach(t=>{this.deactivateElement(t)}),this.activateElement(t),this.onSubmit(e)})}onKeydown(t){const e=this.querySelector('[tabindex]:not([tabindex="-1"])'),n=a(e);this.currentIndex=u(e),13===t.keyCode&&this.onSubmit(t),38===t.keyCode&&(0===this.currentIndex?this.currentIndex=n.length-1:this.currentIndex-=1,n.forEach(t=>{u(t)===this.currentIndex?this.activateElement(t):this.deactivateElement(t)})),40===t.keyCode&&(this.currentIndex===n.length-1?this.currentIndex=0:this.currentIndex+=1,n.forEach(t=>{u(t)===this.currentIndex?this.activateElement(t):this.deactivateElement(t)}))}onSubmit(t){}},e([c("focus")],t.MyListComponent.prototype,"onFocus",null),e([c("keydown")],t.MyListComponent.prototype,"onKeydown",null),t.MyListComponent=e([r({selector:"my-list",template:n`<slot name=menu></slot>`,style:o`:host{display:block;background:#181818;width:200px;height:200px;color:#fff;padding:1em;border-radius:8px}`})],t.MyListComponent),customElements.define("my-list",t.MyListComponent),t.MyItemComponent=class extends m{constructor(){super()}onBang(t){"--selected"===this.getAttribute("state")?this.setAttribute("state",""):this.setAttribute("state","--selected")}},e([c("bang","default")],t.MyItemComponent.prototype,"onBang",null),t.MyItemComponent=e([r({selector:"my-item",template:n`<p><span><slot name=msg>item</slot></span></p>`,style:o`:host{display:block;cursor:pointer}:host([state='--selected']){background:#ff69b4;color:#000;font-weight:700}`})],t.MyItemComponent),customElements.define("my-item",t.MyItemComponent),t}({});
    //# sourceMappingURL=main.js.map
    </script>


</body>

</html>